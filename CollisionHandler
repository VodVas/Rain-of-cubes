using UnityEngine;

[RequireComponent(typeof(Renderer))]

public class CollisionHandler : MonoBehaviour
{
    private bool _hasCollided = false;

    private Renderer _renderer;

    private void Awake()
    {
        _renderer = GetComponent<Renderer>();
    }

    private void OnCollisionEnter(Collision collision)
    {
        if (_hasCollided == false && collision.gameObject.TryGetComponent(out PlatformScript _))
        {
            _hasCollided = true;
            SetRandomColor();
            Die();
        }
    }

    private void Die()
    {
        float minLifeTimeValue = 2f;
        float maxLifeTimeValue = 5f;

        float lifeTime = Random.Range(minLifeTimeValue, maxLifeTimeValue + 1);

        Destroy(gameObject, lifeTime);
    }

    private void SetRandomColor()
    {
        _renderer.material.color = Random.ColorHSV();
    }
}
